---
title: "Neel"
output: html_document
date: "2024-07-08"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
library(rerddap)
library(terra)
library(tidyverse)
```
Hello, have a good day!
```{r}
#Loading Data
Tempinfo = info('erdCinpKfmT')
tempset = tabledap(Tempinfo)
Kelpinfo = info('erdCinpKfmRPC')
kelpset = tabledap(Kelpinfo)
Heatwavedata = rast("subset (1).nc")
```
```{r}
# Only taking significant giant kelp data

giantkelpset = kelpset %>%
  select(station, longitude, latitude, depth, time | contains("Macrocystis_pyrifera")) %>% 
  filter(!is.na(Macrocystis_pyrifera_All_Mean) & time >= 1993-05-22) %>% # now we have all the actual values for giant kelp cover within the time frame of the temperature dataset
  group_by(time) %>% 
  mutate(percentcover = Macrocystis_pyrifera_All_Mean, meanpercentcover = mean(percentcover), meandepth = mean(depth)) %>% # make the percent cover easier to type and take the average of it across all locations
  select(-Macrocystis_pyrifera_All_Mean) %>% # removing unnecessary variables 
  relocate(percentcover, .after = time) %>% # formatting
  arrange(time) # formatting

ggplot(giantkelpset, aes(x = time, y = meanpercentcover, color = meandepth)) + geom_point() + geom_line() # first look at the data 
```
```{r}
# Working with the .nc

Heatwavedf = as.data.frame(Heatwavedata, xy = T)
dates = seq(from = as.Date("1992-12-31"), to = as.Date("2008-1-1"), by = "day")

hwdf_comp = Heatwavedf %>% 
  mutate(x2 = x - 360) %>% 
  relocate(x2, .after = x) %>% 
  filter(x2 >= -118.4 | x2 <= -120.4) %>% 
  filter(y >= 32.8, y <= 34.05)

```